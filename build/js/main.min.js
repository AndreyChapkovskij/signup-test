const accountIcon=new Vivus("account-icon",{type:"async",duration:200}),FORM=document.querySelector(".sign-up__form");function getElem(e){return FORM.querySelector(e)}function getElemAll(e){return FORM.querySelectorAll(e)}const checkValidEmail=(e,t,s)=>{if(!/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(e.value))return e.classList.add("not_valid"),t&&s(!1),`${e.name||"email"} is not valid`;e.classList.remove("not_valid")},checkValidPassword=(e,t,s)=>e.value?/^.{8,}$/.test(e.value)?void e.classList.remove("not_valid"):(e.classList.add("not_valid"),t&&s(!1),`${e.name||"password"} is not valid`):(e.classList.add("not_valid"),t&&s(!1),"password is empty"),checkValidName=(e,t,s)=>{if(!/^.{4,}$/.test(e.value))return e.classList.add("not_valid"),t&&s(!1),`${e.name||"name"} is not valid`;e.classList.remove("not_valid")},SUBMIT_BTN=getElem(".sign-up__form--submit"),NAME=getElem(".input #first-name"),LAST_NAME=getElem(".input #last-name"),MAIL=getElem(".input #e-mail"),PASSWORD=getElem(".input #password"),CONFIRM=getElem(".input #confirm"),RADIO_BTNS=getElemAll("[type=radio]"),GENDER=getElem(".gender"),POPUP=document.querySelector(".popup"),POPUP_CLOSE=POPUP.querySelector(".popup__close");function onEntry(e){e.forEach(e=>{e.isIntersecting&&e.target.classList.add("element-show")})}POPUP_CLOSE.addEventListener("click",function(){POPUP.classList.remove("show")}),FORM.onsubmit=async e=>{e.preventDefault();let t=!0;function s(e){t=e}MAIL.nextElementSibling.textContent=checkValidEmail(MAIL,t,s),NAME.nextElementSibling.textContent=checkValidName(NAME,t,s),LAST_NAME.nextElementSibling.textContent=checkValidName(LAST_NAME,t,s),PASSWORD.nextElementSibling.textContent=checkValidPassword(PASSWORD,t,s),CONFIRM.nextElementSibling.textContent=checkValidPassword(CONFIRM,t,s),PASSWORD.value&&CONFIRM.value&&CONFIRM.value!==PASSWORD.value&&(PASSWORD.classList.add("not_valid"),CONFIRM.classList.add("not_valid"),t&&s(!1),PASSWORD.nextElementSibling.textContent="passwords do not match");let n=!1;if(RADIO_BTNS.forEach(e=>{e.checked&&(n=!0)}),n?(GENDER.classList.remove("not_valid"),GENDER.nextElementSibling.textContent=""):(GENDER.classList.add("not_valid"),GENDER.nextElementSibling.textContent="Choose please your gender"),t&&n)try{(await fetch("/js/server-ok.json",{method:"GET"})).ok||new Error("Server error"),e.target.reset(),MAIL.closest("div").classList.remove("valid"),POPUP.classList.add("show")}catch(e){alert(e.message)}else SUBMIT_BTN.classList.add("shaking"),setTimeout(()=>{SUBMIT_BTN.classList.remove("shaking")},300)};let options={threshold:[.5]},observer=new IntersectionObserver(onEntry,options);for(let e of getElemAll(".sign-up__form--inputs>div"))observer.observe(e);MAIL.addEventListener("input",function(){checkValidEmail(MAIL)?this.closest("div").classList.remove("valid"):(this.closest("div").classList.add("valid"),MAIL.nextElementSibling.textContent="")});export{FORM,getElem,getElemAll,checkValidEmail,checkValidPassword,checkValidName};